{"version":3,"names":[],"mappings":"","sources":["readmore.js"],"sourcesContent":["$(document).ready(function () {\r\n\r\n    var productDescription = $('.js-readmore');\r\n    var productDescriptionHeight = '';\r\n\r\n    console.log($(productDescription).children());\r\n\r\n    function readMoreInit() {\r\n        var childHeight = [],\r\n            childWidth = [];\r\n\r\n        if($(productDescription).hasClass('active')) return;\r\n\r\n        $(productDescription).children().each(function (indx, element) {\r\n            console.log($(element).hasClass('readmore_btn'));\r\n            if (!$(element).hasClass('readmore_btn')) {\r\n                childHeight.push($(element).outerHeight());\r\n                childWidth.push($(element).outerWidth());\r\n            }\r\n        });\r\n        console.log(childHeight,childWidth);\r\n        if (childHeight.length < 2 && childWidth.length < 2) {\r\n            console.log('aasda');\r\n            $(productDescription).css({\r\n                height: '300px'\r\n            })\r\n                .addClass('readmore_disable');\r\n            if ($(productDescription).children('.readmore_btn').length === 0) {\r\n                $(productDescription).append('<div style=\"width: 100%\" class=\"readmore_btn\"><div class=\"readmore_text\">Подробнее</div></div>');\r\n            }\r\n        } else {\r\n            var minHeight = getMin(childHeight),\r\n                minWidth = getMin(childWidth),\r\n                maxHeight = getMax(childHeight),\r\n                maxWidth = getMax(childWidth);\r\n\r\n            $(productDescription)\r\n                .addClass('readmore_disable')\r\n                .css({height: minHeight});\r\n\r\n            if ($(productDescription).children('.readmore_btn').length === 0) {\r\n                $(productDescription).append('<div style=\"width: ' + (minWidth / (maxWidth * 0.01)) + '%\" class=\"readmore_btn\"><div class=\"readmore_text\">Подробнее</div></div>')\r\n            } else {\r\n                $('.readmore_btn').css({width: (minWidth / (maxWidth * 0.01))+'%'})\r\n            }\r\n        }\r\n\r\n\r\n        $('.readmore_btn').click(function () {\r\n            $(productDescription).removeClass('readmore_disable').addClass('active').css({height: 'auto'});\r\n        })\r\n    }\r\n    if(screen.width >= 992) {\r\n        readMoreInit();\r\n    } else {\r\n        readMoreInitMobile();\r\n    }\r\n    $(window).resize(function () {\r\n        if(screen.width >= 992){\r\n            readMoreInit();\r\n        } else {\r\n            readMoreInitMobile();\r\n            $('.readmore_btn').css({width: '100%'});\r\n            $(productDescription).css({height: 'auto'});\r\n\r\n            $(productDescription).children('.tile__text').css({height: '250px'})\r\n        }\r\n    });\r\n\r\n    function readMoreInitMobile() {\r\n        if($(productDescription).hasClass('active')) return;\r\n\r\n        $(productDescription)\r\n            .addClass('readmore_disable')\r\n            .children('.tile__text')\r\n            .css({height: '250px'})\r\n            .append('<div style=\"width: 100%; height: 70px\" class=\"readmore_btn\"><div class=\"readmore_text\">Подробнее</div></div>');\r\n        $('.readmore_btn').click(function () {\r\n            $(productDescription).removeClass('readmore_disable').addClass('active').children('.tile__text').css({height: 'auto'});\r\n        })\r\n    }\r\n\r\n\r\n    function getMin(arr) {\r\n        var arrLen = arr.length,\r\n            minEl = arr[0];\r\n        for (var i = 0; i < arrLen; i++) {\r\n            if (minEl > arr[i]) {\r\n                minEl = arr[i];\r\n            }\r\n        }\r\n        return minEl;\r\n    }\r\n\r\n    function getMax(arr) {\r\n        var arrLen = arr.length,\r\n            maxEl = arr[0];\r\n        for (var i = 0; i < arrLen; i++) {\r\n            if (maxEl < arr[i]) {\r\n                maxEl = arr[i];\r\n            }\r\n        }\r\n        return maxEl;\r\n    }\r\n\r\n\r\n    // function init() {\r\n    //     productDescriptionHeight = $(productDescription).innerHeight();\r\n    //     var prevElemHeight;\r\n    //\r\n    //     if ($(productDescription).find('.tile__wrapper').length === 0) {\r\n    //         if (screen.width >= 992) {\r\n    //             prevElemHeight = $(productDescription).innerWidth() / 6;\r\n    //         } else if (screen.width >= 768) {\r\n    //             prevElemHeight = $(productDescription).innerWidth() / 4;\r\n    //         } else if (screen.width >= 500 && screen.width < 768) {\r\n    //             prevElemHeight = $(productDescription).innerWidth() / 2\r\n    //         } else if (screen.width >= 320 && screen.width < 500) {\r\n    //             prevElemHeight = $(productDescription).innerWidth();\r\n    //         } else {\r\n    //             $(this).outerHeight('auto');\r\n    //             $(this).removeClass('product-desc__disable');\r\n    //             return\r\n    //         }\r\n    //     } else if (screen.width >= 992) {\r\n    //         prevElemHeight = $(productDescription).innerWidth() / 4;\r\n    //     } else if (screen.width >= 768) {\r\n    //         prevElemHeight = $(productDescription).innerWidth() / 1.5;\r\n    //     } else if (screen.width >= 320 && screen.width < 500) {\r\n    //         prevElemHeight = $(productDescription).innerWidth() * 2;\r\n    //     } else {\r\n    //         $(this).outerHeight('auto');\r\n    //         $(this).removeClass('product-desc__disable');\r\n    //         return\r\n    //     }\r\n    //\r\n    //     if (prevElemHeight > productDescriptionHeight) {\r\n    //         $(this).outerHeight('auto');\r\n    //         $(this).removeClass('product-desc__disable');\r\n    //         return\r\n    //     }\r\n    //\r\n    //     $(productDescription).addClass('product-desc__disable');\r\n    //     $(productDescription).innerHeight(prevElemHeight);\r\n    //     $(productDescription).on('click', function () {\r\n    //         if ($(this).hasClass('.product-desc__disable')) {\r\n    //             $(this).outerHeight('auto');\r\n    //             $(this).removeClass('product-desc__disable')\r\n    //         } else {\r\n    //             // $(this).outerHeight(prevElemHeight);\r\n    //             // $(this).addClass('product-desc__disable')\r\n    //         }\r\n    //\r\n    //     })\r\n    // }\r\n    //\r\n    // init();\r\n    // $(window).resize(function () {\r\n    //     init();\r\n    // })\r\n});"],"file":"readmore.js"}