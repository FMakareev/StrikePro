{"version":3,"names":[],"mappings":"","sources":["readmore.js"],"sourcesContent":["$(document).ready(function () {\r\n\r\n    var readMoreWrapper = $('.js-readmore');\r\n    var readMoreBtn = null;\r\n    var readMoreBtnWrapper = null;\r\n    var currentLineHeight = parseInt($(readMoreWrapper).css('line-height'));\r\n    var currentHeight = parseInt($('.js-readmore .tile__text').css('height'));\r\n\r\n    function initToggleDescription() {\r\n\r\n        if (currentHeight > (currentLineHeight * 4)) {\r\n            $(readMoreWrapper).css({height: (currentLineHeight * 4) + 'px'})\r\n        } else {\r\n            $(readMoreWrapper).css({height: 'auto'})\r\n        }\r\n    }\r\n\r\n\r\n    function toggleDescriptionHandler() {\r\n        if ($(readMoreWrapper).hasClass('readmore_close')) {\r\n            $(readMoreBtn).text('Свернуть');\r\n            $(readMoreWrapper).removeClass('readmore_close').addClass('readmore_open').css({height: 'auto'})\r\n        } else {\r\n            $(readMoreBtn).text('Подробнее');\r\n            $(readMoreWrapper).removeClass('readmore_open').addClass('readmore_close').css({height: (currentLineHeight * 4) + 'px'})\r\n        }\r\n    }\r\n\r\n    function superToggleDescription() {\r\n        console.log('superToggleDescription');\r\n        var height = parseInt($(readMoreWrapper).css('width')) / 4;\r\n        if (currentHeight > height) {\r\n\r\n            if ($(document).width() >= 992) {\r\n                addReadmoreBtn('50%', superToggleDescriptionHandler, 'readmore_btn-wrap--white');\r\n            } else {\r\n                addReadmoreBtn('100%', superToggleDescriptionHandler, 'readmore_btn-wrap--white');\r\n            }\r\n\r\n            if ($(document).width() >= 992) {\r\n                console.log(height);\r\n                $(readMoreBtnWrapper).css({width: '50%'});\r\n                $(readMoreWrapper).addClass('readmore_close').css({height: height + 'px'});\r\n            } else {\r\n                $(readMoreBtnWrapper).css({width: '100%'});\r\n                $(readMoreWrapper).addClass('readmore_close').css({height: (getHeightDescription() + currentLineHeight * 4) + 'px'});\r\n            }\r\n        } else {\r\n            $(readMoreWrapper).css({height: 'auto'})\r\n        }\r\n    }\r\n\r\n    function superToggleDescriptionHandler() {\r\n        if ($(readMoreWrapper).hasClass('readmore_close')) {\r\n            $(readMoreBtn).text('Свернуть');\r\n            $(readMoreBtnWrapper).css({width: '100%'});\r\n            $(readMoreWrapper).removeClass('readmore_close').addClass('readmore_open').css({height: 'auto'})\r\n        } else {\r\n            $(readMoreBtn).text('Подробнее');\r\n            $(readMoreWrapper).removeClass('readmore_open').addClass('readmore_close');\r\n            if ($(document).width() >= 992) {\r\n                $(readMoreBtnWrapper).css({width: '50%'});\r\n                $(readMoreWrapper).css({height: (parseInt($(readMoreWrapper).css('width')) / 4) + 'px'});\r\n            } else {\r\n                $(readMoreBtnWrapper).css({width: '100%'});\r\n                $(readMoreWrapper).css({height: (getHeightDescription() + currentLineHeight * 6) + 'px'});\r\n            }\r\n        }\r\n    }\r\n\r\n    function responsiveInit() {\r\n        window.addEventListener('resize', function () {\r\n            console.log('resize');\r\n            if ($(readMoreWrapper).hasClass('readmore_close')) {\r\n                superToggleDescription();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    function getHeightDescription() {\r\n        var childHeight = [],\r\n            childWidth = [];\r\n\r\n        $(readMoreWrapper).children().each(function (indx, element) {\r\n            if (!$(element).hasClass('readmore_btn-wrap')) {\r\n                childHeight.push($(element).outerHeight());\r\n                childWidth.push($(element).outerWidth());\r\n            }\r\n        });\r\n\r\n        var minHeight = getMin(childHeight),\r\n            minWidth = getMin(childWidth),\r\n            maxHeight = getMax(childHeight),\r\n            maxWidth = getMax(childWidth);\r\n\r\n        console.log('minHeight:', minHeight);\r\n        console.log('minWidth:', minWidth);\r\n        console.log('maxHeight:', maxHeight);\r\n        console.log('maxWidth:', maxWidth);\r\n        return minHeight;\r\n    }\r\n\r\n    init();\r\n\r\n    function init() {\r\n        if ($(readMoreWrapper).children().length === 1) {\r\n            addReadmoreBtn('100%', toggleDescriptionHandler, '');\r\n            initToggleDescription();\r\n        } else if ($(readMoreWrapper).children().length === 2) {\r\n\r\n            superToggleDescription();\r\n            responsiveInit()\r\n        }\r\n    }\r\n\r\n    function addReadmoreBtn(btnWidth, clickHandler, wrapperMode) {\r\n\r\n        var btn = '<div style=\"width: ' + btnWidth + '\" class=\"readmore_btn-wrap ' + wrapperMode + '\">\\n' +\r\n            '              <btn class=\"readmore_btn js-readmore_btn item-more\">Подробнее</btn>\\n' +\r\n            '            </div>';\r\n\r\n        if($(readMoreWrapper).find('.readmore_btn-wrap').length === 0){\r\n            $(readMoreWrapper).append(btn);\r\n            readMoreBtn = $('.js-readmore_btn');\r\n            readMoreBtnWrapper = $('.readmore_btn-wrap');\r\n            $(readMoreBtn).on('click', clickHandler);\r\n        }\r\n    }\r\n\r\n    function getMin(arr) {\r\n        var arrLen = arr.length,\r\n            minEl = arr[0];\r\n        for (var i = 0; i < arrLen; i++) {\r\n            if (minEl > arr[i]) {\r\n                minEl = arr[i];\r\n            }\r\n        }\r\n        return minEl;\r\n    }\r\n\r\n    function getMax(arr) {\r\n        var arrLen = arr.length,\r\n            maxEl = arr[0];\r\n        for (var i = 0; i < arrLen; i++) {\r\n            if (maxEl < arr[i]) {\r\n                maxEl = arr[i];\r\n            }\r\n        }\r\n        return maxEl;\r\n    }\r\n\r\n});\r\n\r\n\r\n"],"file":"readmore.js"}