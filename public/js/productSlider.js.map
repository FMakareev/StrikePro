{"version":3,"names":[],"mappings":"","sources":["productSlider.js"],"sourcesContent":["$(document).ready(function () {\r\n    var elemList = $(\".colorTable__item img\");\r\n    var slideContainer = $(\".slider__wrap\");\r\n    var currentPosition = 0;\r\n    var widthStep;\r\n    var maxStep;\r\n\r\n    function init() {\r\n\r\n        for (var i = 0; i < elemList.length; i++) {\r\n            var dataImg = \"\" + $(elemList[i]).attr(\"data-data-img\");\r\n            var imgLink = $(elemList[i]).attr(\"src\");\r\n            var imgBig = $(elemList[i]).attr(\"data-big-img\");\r\n\r\n\r\n\r\n            var li = $('<li class=\"slider__item\"></li>');\r\n            var link = $('<a href=\"\" class=\"slider__link\" data-data-img=\"\"></a>');\r\n            var img = $('<img src=\"\">');\r\n            $(link).attr({'data-data-img' : dataImg, 'href': imgBig});\r\n\r\n            if ( $(elemList[i]).attr(\"data-alt-img\") ) {\r\n                $(link).attr({'data-alt-img' : $(elemList[i]).attr(\"data-alt-img\")});\r\n            }\r\n\r\n            $(img).attr('src',imgLink);\r\n            $(link).append(img);\r\n            $(li).append(link);\r\n            $(slideContainer).append(li);\r\n        }\r\n\r\n        widthStep = $('.colorTable__gallery--slider').outerWidth() / 6;\r\n        maxStep = (elemList.length * widthStep) - (widthStep * 6);\r\n\r\n        $(\".colorTable__gallery--title__name\").text($(\".product__title h1\").text());\r\n\r\n        $(\".slider__link\").on(\"click\", function (event) {\r\n            event.preventDefault();\r\n            changeActiveImgVariation(this);\r\n            createCharacteristicsImg(this);\r\n            createAltImgList(this);\r\n        });\r\n\r\n        var $panzoom = $('.colorTable__gallery--img img').panzoom();\r\n        $panzoom.parent().on('mousewheel.focal', function( e ) {\r\n            e.preventDefault();\r\n            var delta = e.delta || e.originalEvent.wheelDelta;\r\n            var zoomOut = delta ? delta < 0 : e.originalEvent.deltaY > 0;\r\n            $panzoom.panzoom('zoom', zoomOut, {\r\n                increment: 0.1,\r\n                animate: false,\r\n                focal: e\r\n            });\r\n        });\r\n    }\r\n// Добавление характеристик товара над картинкой\r\n    function createCharacteristicsImg(elem) {\r\n        var container = $('.characteristics__list');\r\n        var imgData = jQuery.parseJSON($(elem).attr(\"data-data-img\"));\r\n        $(container).empty();\r\n        for(var i = 0; i < imgData.length; i++){\r\n            var elem = '<li class=\"characteristics__item\"><span class=\"characteristics__title\">'+imgData[i].title+'</span><span class=\"characteristics__desc\">'+imgData[i].data+'</span></li>';\r\n            $(container).append(elem);\r\n        }\r\n    }\r\n// добавление вариаций товара справа, если они есть\r\n    function createAltImgList(elem) {\r\n        var jsonListLink = $(elem).attr(\"data-alt-img\");\r\n        var wrapperVariation = $('.colorTable__gallery--variation');\r\n        var containerVariation = $('ul.variation__list');\r\n        $(containerVariation).empty();\r\n\r\n        if(jsonListLink != undefined) {\r\n            var linkArray = jQuery.parseJSON(jsonListLink);\r\n            $(wrapperVariation).addClass('active');\r\n\r\n            for(var i = 0; i < linkArray.length; i++){\r\n                var li = $('<li class=\"variation__item\"></li>');\r\n                var img = $('<img src=\"\">');\r\n                $(img).attr('src', linkArray[i]);\r\n                $(li).append(img);\r\n                $(containerVariation).append(li);\r\n            }\r\n            $('li.variation__item').on('click', function () {\r\n                changeActiveImgVariation(this);\r\n            });\r\n            // -2665.67\r\n        } else {\r\n            $(wrapperVariation).removeClass('active');\r\n        }\r\n    }\r\n// изменение активного изображения\r\n    function changeActiveImgVariation(elem) {\r\n        $(\".colorTable__gallery--img img\").attr(\"src\", $(elem).find(\"img\").attr(\"src\"));\r\n    }\r\n\r\n    $(\".left\").on(\"click\", function () {\r\n\r\n        if (elemList.length <= 6) {\r\n            return\r\n        }\r\n\r\n        if (currentPosition <= 0) {\r\n            currentPosition = 0;\r\n            $(slideContainer).css({\r\n                \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n            });\r\n\r\n            return;\r\n        }\r\n\r\n        currentPosition -= widthStep;\r\n        $(slideContainer).css({\r\n            \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n        });\r\n    });\r\n\r\n    $(\".right\").on(\"click\", function () {\r\n        console.log();\r\n        if (elemList.length <= 6) {\r\n            return\r\n        }\r\n        if (Math.round(currentPosition) == maxStep) {\r\n            currentPosition = maxStep;\r\n            $(slideContainer).css({\r\n                \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n            });\r\n            return;\r\n        }\r\n        currentPosition += widthStep;\r\n        $(slideContainer).css({\r\n            \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n        });\r\n    });\r\n\r\n\r\n\r\n        // open popup\r\n    $(elemList).on(\"click\", function (event) {\r\n        var windowSize = window.innerWidth;\r\n        if (windowSize >= 768) {\r\n            $(\".colorTable__gallery--img img\").attr(\"src\", $(this).attr(\"src\"));\r\n\r\n\r\n            createCharacteristicsImg(this);\r\n            createAltImgList(this);\r\n\r\n            $(\".colorTable__gallery--wrapper\").show();\r\n\r\n            $(\"body\").css({\r\n                \"overflow\": \"hidden\"\r\n            });\r\n\r\n            return init();\r\n            if ($(this).index() >= (elemList.length - 5)) {\r\n                currentPosition = widthStep * ($(this).index() - 5);\r\n            } else {\r\n                currentPosition = widthStep * $(this).index();\r\n            }\r\n            $(slideContainer).css({\r\n                \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n            });\r\n        }\r\n    })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    $(\".js-btn3D\").on(\"click\", function () {\r\n        $(\".product__stand .img_2d\").hide();\r\n        $(\"#image-reel\").show()\r\n    })\r\n\r\n    $(\".product__sliderImg ul li a\").on('click', function (event) {\r\n        event.preventDefault();\r\n        $(\"#image-reel\").hide();\r\n        $(\".product__stand .img_2d\").show()\r\n        $(\".product__stand .img_2d\").attr(\"src\", $(this).attr(\"href\"));\r\n    })\r\n\r\n    $(window).resize(function () {\r\n        var k = 500 / 304;\r\n        var w = screen.width;\r\n\r\n        if (w < 500) {\r\n            $('.product__stand').height($('.product__stand').width() / k);\r\n        }\r\n    });\r\n\r\n});\r\n"],"file":"productSlider.js"}