{"version":3,"names":[],"mappings":"","sources":["productSlider.js"],"sourcesContent":["$(document).ready(function () {\r\n    var body = $(\"body\");\r\n\r\n    var colorTable = $('.colorTable'),\r\n        characteristicsList = $('.characteristics__list'),\r\n        slideContainer = $(\".slider__wrap\"),\r\n        galleryWrap = $('.colorTable__gallery--wrapper'),\r\n        gallerySliderWrap = $('.colorTable__gallery--slider'),\r\n        galleryPhotoList = $('.variation__list'),\r\n        galleryMainPhoto = $('.colorTable__gallery--img img'),\r\n        galleryMainTitle = $('.colorTable__gallery--title');\r\n\r\n    var colorTableItem = [],\r\n        sliderItem = [],\r\n        currentPhoto = [];\r\n\r\n    var currentPosition = 0,\r\n        widthStep,\r\n        maxStep;\r\n\r\n    // функции генераторы разметки\r\n\r\n    function colorTableItemRender(id, image, title) {\r\n        return ('<div class=\"colorTable__item\" id=\"' + id + '\">' +\r\n        '<img src=\"' + image + '\" alt=\"\">' +\r\n        '<span>' + title + '</span>' +\r\n        '</div>')\r\n    }\r\n\r\n    function descriptionRender(array) {\r\n        var features = [];\r\n        $(characteristicsList).empty();\r\n        for (var i = 0; i < array.length; i++) {\r\n            var feature = '<li class=\"characteristics__item\">' +\r\n                '<span class=\"characteristics__title\">' + array[i].title + '</span>' +\r\n                '<span class=\"characteristics__desc\">' + array[i].pivot.value + '</span>' +\r\n                '</li>';\r\n            features.push(feature);\r\n        }\r\n        $(characteristicsList).append(features);\r\n    }\r\n\r\n    function sliderItemRender(image, id) {\r\n        return (\r\n            '<li  class=\"slider__item\" id=\"' + id + '\"> <a href=\"#!\"  class=\"slider__link\" ><img src=\"' + image + '\" /></a> </li>'\r\n        )\r\n    }\r\n\r\n    function gelleryPhotoRender(array) {\r\n        var photos = [];\r\n        for (var i = 0; i < array.length; i++) {\r\n            var photo = '<li class=\"variation__item\">' +\r\n                '<img id=\"' + array[i].id + '\" src=\"' + array[i].thumb + '\" alt=\"\">' +\r\n                '</li>';\r\n            photos.push(photo);\r\n            if (i === 0) {\r\n                initGalleryMainPhoto(array[i].id);\r\n            }\r\n        }\r\n        $(galleryPhotoList).append(photos);\r\n        $('.colorTable__gallery--variation').addClass('active');\r\n\r\n        $('.variation__item img').on('click', function () {\r\n            initGalleryMainPhoto($(this).attr('id'));\r\n            $(galleryMainPhoto).css({\r\n                'transform': 'none'\r\n            })\r\n        })\r\n    }\r\n\r\n    // функции движения слайдера\r\n\r\n    function leftMove() {\r\n        if (sliderItem.length <= 6) {\r\n            return\r\n        }\r\n\r\n        if (currentPosition <= 0) {\r\n            currentPosition = 0;\r\n            $(slideContainer).css({\r\n                \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n            });\r\n\r\n            return;\r\n        }\r\n\r\n        currentPosition -= widthStep;\r\n        $(slideContainer).css({\r\n            \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n        });\r\n    }\r\n\r\n    function rightMove() {\r\n        if (sliderItem.length <= 6) {\r\n            return\r\n        }\r\n        if (Math.round(parseFloat(currentPosition)) === Math.round(parseFloat(maxStep))) {\r\n            currentPosition = parseFloat(maxStep);\r\n            $(slideContainer).css({\r\n                \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n            });\r\n            return;\r\n        }\r\n        currentPosition += parseFloat(widthStep);\r\n        $(slideContainer).css({\r\n            \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n        });\r\n    }\r\n\r\n    function initGallery() {\r\n        var windowSize = window.innerWidth;\r\n        if (windowSize >= 768) {\r\n            $(galleryWrap).show();\r\n            $(body).css({\r\n                \"overflow\": \"hidden\"\r\n            });\r\n\r\n            var $panzoom = $(galleryMainPhoto).panzoom();\r\n            $panzoom.parent().on('mousewheel.focal', function (e) {\r\n                e.preventDefault();\r\n                var delta = e.delta || e.originalEvent.wheelDelta;\r\n                var zoomOut = delta ? delta < 0 : e.originalEvent.deltaY > 0;\r\n                $panzoom.panzoom('zoom', zoomOut, {\r\n                    increment: 0.1,\r\n                    animate: false,\r\n                    focal: e\r\n                });\r\n            });\r\n\r\n\r\n            return initSlider(this);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function initSlider(event) {\r\n\r\n        sliderItem = [];\r\n        (slideContainer).empty();\r\n        $(galleryPhotoList).empty();\r\n        for (var i = 0; i < articles.length; i++) {\r\n            sliderItem.push(sliderItemRender(articles[i].logo.thumb, articles[i].id))\r\n        }\r\n        $(slideContainer).append(sliderItem);\r\n\r\n        widthStep = (parseFloat($(gallerySliderWrap).outerWidth() / 6)).toFixed(3);\r\n        maxStep = (parseFloat((sliderItem.length * widthStep) - (widthStep * 6))).toFixed(3);\r\n\r\n        currentPosition = 0;\r\n        $(slideContainer).css({\r\n            \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n        });\r\n\r\n        $(\".slider__item\").each(function (index, element) {\r\n            if (parseInt($(element).attr('id')) === parseInt($(event).attr('id'))) {\r\n                $(element).addClass('active');\r\n                if (index + 1 > 6) {\r\n                    currentPosition = (parseFloat(((index + 1) * widthStep) - (widthStep * 6))).toFixed(3);\r\n                    $(slideContainer).css({\r\n                        \"transform\": \"translateX(-\" + currentPosition + \"px)\"\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        initDescription($(event).attr('id'));\r\n        initPhotos($(event).attr('id'));\r\n\r\n        $(\".slider__item\").on('click', function () {\r\n            initDescription($(this).attr('id'));\r\n            initPhotos($(this).attr('id'));\r\n            $(\".slider__item\").removeClass('active');\r\n            $(this).addClass('active');\r\n\r\n            $(galleryMainPhoto).css({\r\n                'transform': 'none'\r\n            })\r\n        })\r\n    }\r\n\r\n    function initDescription(id) {\r\n        for (var i = 0; i < articles.length; i++) {\r\n            if (articles[i].id === parseInt(id)) {\r\n                descriptionRender(articles[i].features);\r\n            }\r\n        }\r\n    }\r\n\r\n    function initPhotos(id) {\r\n        currentPhoto = [];\r\n        $(galleryPhotoList).empty();\r\n        for (var i = 0; i < articles.length; i++) {\r\n            if (articles[i].id === parseInt(id)) {\r\n                currentPhoto = articles[i].photos;\r\n                gelleryPhotoRender(articles[i].photos);\r\n            }\r\n        }\r\n    }\r\n\r\n    function initGalleryMainPhoto(id) {\r\n        for (var i = 0; i < currentPhoto.length; i++) {\r\n            if (currentPhoto[i].id === parseInt(id)) {\r\n                $(galleryMainPhoto).attr('src', currentPhoto[i].original);\r\n                $(galleryMainTitle).text(currentPhoto[i].title);\r\n            }\r\n        }\r\n    }\r\n\r\n    function init() {\r\n        var windowSize = window.innerWidth;\r\n        $(colorTable).empty();\r\n        $(colorTable).after(\"<div class='colorTable _mobile'></div>\");\r\n        $(\".left\").on(\"click\", leftMove);\r\n        $(\".right\").on(\"click\", rightMove);\r\n\r\n        for (var i = 0; i < articles.length; i++) {\r\n            if(articles[i].logo) {\r\n                colorTableItem.push(colorTableItemRender(articles[i].id, articles[i].logo.thumb, articles[i].name));\r\n            } else {\r\n                colorTableItem.push(colorTableItemRender(articles[i].id, '/image/no_image.svg', articles[i].name));\r\n            }\r\n        }\r\n        $(colorTable).append(colorTableItem);\r\n        $('.colorTable._mobile').append(colorTableItem);\r\n        $('.colorTable._desctop .colorTable__item').on('click', initGallery);\r\n        if (windowSize >= 768) {\r\n\r\n        } else {\r\n            colorTable_item_slider();\r\n        }\r\n    }\r\n\r\n    function colorTable_item_slider() {\r\n        var colorTableItemMobile = $('.colorTable._mobile .colorTable__item');\r\n        var colorTableItemMobileLength = colorTableItemMobile.length;\r\n        for (var i = 0; i < colorTableItemMobileLength; i++) {\r\n            var slides = [];\r\n            var classNav = \".custom-navigation-\" + i + \" a\";\r\n            var photos = articles[i].photos,\r\n                photosLength = photos.length;\r\n\r\n            if (photosLength === 1) continue;\r\n\r\n            var sliderWrap = document.createElement('div'),\r\n                sliderList = document.createElement('ul');\r\n            $(sliderWrap).addClass('slider-' + i);\r\n            $(sliderList).addClass('slides');\r\n\r\n            for (var a = 0; a < photosLength; a++) {\r\n                var li = document.createElement('li'),\r\n                    img = document.createElement('img'),\r\n                    span = document.createElement('span');\r\n                $(span).text(photos[a].title);\r\n                $(img).attr('src', photos[a].original);\r\n                $(li).append(img);\r\n                $(li).append(span);\r\n                slides.push(li)\r\n            }\r\n\r\n            $(sliderList).append(slides);\r\n            $(sliderWrap).append(sliderList);\r\n            $(sliderWrap).append('<div class=\"flex-direction-nav ' + \"custom-navigation-\" + i + '\">' +\r\n                '<a href=\"#\" class=\"flex-prev\">' +\r\n                '<svg><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#svg_arrow\" class=\"caret__arrow\"></use></svg>' +\r\n                '</a>' +\r\n                '<a href=\"#\" class=\"flex-next\">' +\r\n                '<svg><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#svg_arrow\" class=\"caret__arrow\"></use></svg>' +\r\n                '</a>' +\r\n                '</div>');\r\n\r\n\r\n            $(colorTableItemMobile[i]).empty();\r\n            $(colorTableItemMobile[i]).append(sliderWrap);\r\n\r\n            $(sliderWrap).flexslider({\r\n                animation: \"slide\",\r\n                slideshow: false,\r\n                touch: true,\r\n                directionNav: true,\r\n                controlNav: false,\r\n                customDirectionNav: $(classNav)\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    init();\r\n\r\n    $(window).resize(function () {\r\n        var windowSize = window.innerWidth;\r\n        if (windowSize >= 768) {\r\n            widthStep = (parseFloat($(gallerySliderWrap).outerWidth() / 6)).toFixed(3);\r\n            maxStep = (parseFloat((sliderItem.length * widthStep) - (widthStep * 6))).toFixed(3);\r\n            currentPosition = 0;\r\n            $(slideContainer).css({\r\n                \"transform\": \"translateX(0px)\"\r\n            });\r\n        } else {\r\n            colorTable_item_slider();\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n$(document).ready(function () {\r\n    $(\".js-btn3D\").on(\"click\", function () {\r\n        $(\".product__stand .img_2d\").hide();\r\n        $(\"#image-reel\").show()\r\n    });\r\n\r\n    $(window).resize(function () {\r\n        var k = 500 / 304;\r\n        var w = screen.width;\r\n\r\n        if (w < 500) {\r\n            $('.product__stand').height($('.product__stand').width() / k);\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n"],"file":"productSlider.js"}