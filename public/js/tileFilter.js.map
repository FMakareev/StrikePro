{"version":3,"names":[],"mappings":"","sources":["tileFilter.js"],"sourcesContent":["\r\n$(document).ready(function () {\r\n\r\n    var tile_list = $(\".tile__wrapper[data-tileid]\");\r\n    var _num_row = 0;\r\n    var num_col = 0;\r\n\r\n    var tile1Width = $(\".tile__wrapper[data-tileid='1']\").innerWidth(),\r\n        tile2Width = $(\".tile__wrapper[data-tileid='2']\").innerWidth();\r\n\r\n    var tileListWidth = $(\".tile-list\").width();\r\n    var tile_array = $(\".tile__wrapper[data-tileid]\");\r\n\r\n    var tile_row_array = [];\r\n\r\n    function row_object_constructor(top, row_width, elem_list) {\r\n        this.row_top_position = top;\r\n        this.row_width = row_width;\r\n        this.elem_list = elem_list;\r\n    }\r\n\r\n    function init() {\r\n        var screenWidth = window.innerWidth;\r\n        var top = 0;\r\n        var elem_newarray = [];\r\n        var row_width = 0;\r\n        var tile_array_length = $(tile_array).length;\r\n        for (var i = 0; i < tile_array_length; i++) {\r\n            if (top < $(tile_array[i]).position().top) {\r\n                top = $(tile_array[i]).position().top;\r\n                elem_newarray = $(tile_array).filter(function (index) {\r\n                    return $(this).position().top === top;\r\n                });\r\n                for (var a = 0; a < $(elem_newarray).length; a++) {\r\n                    row_width += $(elem_newarray[a]).innerWidth();\r\n                }\r\n                var new_row = new row_object_constructor(top, row_width, elem_newarray);\r\n                tile_row_array.push(new_row);\r\n                row_width = 0;\r\n            }\r\n        }\r\n\r\n        // console.log(tile_row_array);\r\n        // console.log(tile1Width + \" tile1Width\");\r\n        // console.log(tile2Width + \" tile2Width\");\r\n        // console.log(tile1Width * 4);\r\n        // console.log(tileListWidth);\r\n\r\n        // если сумма ширин элементов последней строки не равна ширине контейнера\r\n        if (tile_row_array[tile_row_array.length - 1].row_width != tileListWidth) {\r\n            // получаю разницу в виде колличества недостающих плиток\r\n            var raznica = Math.round((tileListWidth - tile_row_array[tile_row_array.length - 1].row_width) / tile1Width);\r\n            // коллекция элементов последней строки\r\n            var elemList = tile_row_array[tile_row_array.length - 1].elem_list;\r\n            // длинна коллекции элементов последней строки\r\n            var elemListLength = elemList.length;\r\n            var count = 2;\r\n            var statusWhile = true;\r\n            // если разница равна нулю или меньше\r\n            if (raznica <= 0) {\r\n                return\r\n\r\n            } else { // иначе едем дальше\r\n\r\n\r\n                if (screenWidth >= 1400) {\r\n                    console.log(raznica);\r\n                    switch (raznica) {\r\n                        case 4:\r\n                            console.log(\"колличество элементов в строке равно 1 == col-2_4\");\r\n                            while (statusWhile === true) {\r\n                                var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\r\n                                for (var i = 0; i < prevRowElemList.length; i++) {\r\n                                    if ($(prevRowElemList[i]).hasClass(\"col-4_8\")) {\r\n                                        $(prevRowElemList[i]).toggleClass(\"col-4_8 col-2_4\");\r\n                                        statusWhile = false;\r\n                                        return\r\n                                    }\r\n                                }\r\n                                count++;\r\n                            }\r\n                            break;\r\n                        case 3:\r\n                            if (elemListLength === 1) {\r\n                                console.log(\"колличество элементов в строке равно 1 == col-4_8\");\r\n                                // элемент последней строи сжимаем до  ячейки\r\n                                $(elemList[0]).toggleClass(\"col-4_8 col-2_4\");\r\n                                while (statusWhile === true) {\r\n                                    var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\r\n                                    for (var i = 0; i < prevRowElemList.length; i++) {\r\n                                        if ($(prevRowElemList[i]).hasClass(\"col-4_8\")) {\r\n                                            $(prevRowElemList[i]).toggleClass(\"col-4_8 col-2_4\");\r\n                                            statusWhile = false;\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    count++;\r\n                                }\r\n                            } else if (elemListLength === 2) {\r\n                                console.log(\"колличество элементов в строке равно 2\");\r\n                                if (window.location.pathname === \"/\") {\r\n                                    $(tile_cap_list.vk).insertAfter(elemList[elemListLength - 1]);\r\n                                }\r\n                                for (var i = 0; i < elemListLength; i++) {\r\n                                    if ($(elemList[i]).hasClass(\"col-2_4\")) {\r\n                                        $(elemList[i]).toggleClass(\"col-2_4 col-4_8\");\r\n                                    }\r\n                                }\r\n                            }\r\n                            break;\r\n                        case 2:\r\n                            console.log(\"колличество элементов в строке равно 3\");\r\n                            if (window.location.pathname === \"/\") {\r\n                                $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\r\n                            }\r\n                            for (var i = 0; i < elemListLength; i++) {\r\n                                if ($(elemList[i]).hasClass(\"col-2_4\")) {\r\n                                    $(elemList[i]).toggleClass(\"col-2_4 col-4_8\");\r\n                                }\r\n                            }\r\n                            break;\r\n                        case 1:\r\n                            console.log(\"колличество элементов в строке равно 4\");\r\n                            if (window.location.pathname === \"/\") {\r\n                                $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                } else if (screenWidth >= 1024) {\r\n                    console.log(raznica);\r\n                    switch (raznica) {\r\n                        case 3:\r\n                            console.log(\"Элементов в строке 1\");\r\n                            while (statusWhile === true) {\r\n                                var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\r\n                                for (var i = 0; i < prevRowElemList.length; i++) {\r\n                                    if ($(prevRowElemList[i]).hasClass(\"col-md-6\")) {\r\n                                        $(prevRowElemList[i]).toggleClass(\"col-md-6 col-md-3\");\r\n                                        statusWhile = false;\r\n                                        return\r\n                                    }\r\n                                }\r\n                                count++;\r\n                            }\r\n                            break;\r\n                        case 2:\r\n                            console.log(\"колличество элементов в строке равно 3\");\r\n                            if (elemListLength === 1) {\r\n                                console.log(\"колличество элементов в строке равно 1 == равен двум\");\r\n                                // элемент последней строи сжимаем до  ячейки\r\n                                $(elemList[0]).toggleClass(\"col-md-6 col-md-3\");\r\n                                while (statusWhile === true) {\r\n                                    var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\r\n                                    for (var i = 0; i < prevRowElemList.length; i++) {\r\n                                        if ($(prevRowElemList[i]).hasClass(\"col-md-6\")) {\r\n                                            $(prevRowElemList[i]).toggleClass(\"col-md-6 col-md-3\");\r\n                                            statusWhile = false;\r\n                                            return\r\n                                        }\r\n                                    }\r\n                                    count++;\r\n                                }\r\n                            } else if (elemListLength === 2) {\r\n                                console.log(\"колличество элементов в строке равно 2\");\r\n                                for (var i = 0; i < elemListLength; i++) {\r\n                                    if ($(elemList[i]).hasClass(\"col-md-3\")) {\r\n                                        $(elemList[i]).toggleClass(\"col-md-3 col-md-6\");\r\n                                    }\r\n                                }\r\n                            }\r\n                            break;\r\n                        case 1:\r\n                            console.log(\"колличество элементов в строке равно 3\");\r\n                            $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\r\n                            break;\r\n                    }\r\n\r\n                } else if (screenWidth >= 768) {\r\n                    console.log(raznica);\r\n                    switch (raznica) {\r\n                        case 2:\r\n                            console.log(\"колличество элементов в строке равно 1\");\r\n                            $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\r\n                            $(elemList[0]).toggleClass(\"col-sm-4 col-sm-8\");\r\n                            break;\r\n                        case 1:\r\n                            console.log(\"колличество элементов в строке равно 2 илиширина одного равна двум\");\r\n                            $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\r\n                            break;\r\n                    }\r\n                } else {\r\n                    return\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    function toggle_tile_class(row_length, _array) {\r\n        for (var a = 0; a < _array.length; a++) {\r\n            switch (row_length) {\r\n                case 5:\r\n                    if ($(_array[a]).hasClass(\"col-4_8\")) {\r\n                        $(_array[a]).toggleClass(\"col-4_8 col-2_4\");\r\n                        _num_row += 1;\r\n                        return\r\n                    }\r\n                    break;\r\n                case 4:\r\n                    if ($(_array[a]).hasClass(\"col-md-6\")) {\r\n                        $(_array[a]).toggleClass(\"col-md-6 col-md-3\");\r\n                        _num_row += 1;\r\n                        return\r\n                    }\r\n                    break;\r\n                case 3:\r\n                    if ($(_array[a]).hasClass(\"col-sm-8\")) {\r\n                        $(_array[a]).toggleClass(\"col-sm-8 col-sm-4\");\r\n                        _num_row += 1;\r\n                        return false\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    function tile_check() {\r\n        var _array = [],\r\n            _num = 0,\r\n            length = tile_list.length,\r\n            w = window.innerWidth,\r\n            row_length;\r\n        if (w >= 1400) {\r\n            row_length = 5;\r\n        } else if (w >= 992) {\r\n            row_length = 4;\r\n        } else if (w >= 768) {\r\n            row_length = 3;\r\n        } else {\r\n            return\r\n        }\r\n\r\n        if (w >= 768) {\r\n            for (var i = 0; i < length; i++) {\r\n                _num += $(tile_list[i]).data(\"tileid\");\r\n                num_col += _num;\r\n                _array.push(tile_list[i]);\r\n                if (_num > row_length) {\r\n                    toggle_tile_class(row_length, _array);\r\n                    _num = 0;\r\n                    _array.length = 0;\r\n                } else if (_num === row_length) {\r\n                    _num_row += 1;\r\n                    _num = 0;\r\n                    _array.length = 0;\r\n                }\r\n            }\r\n        }\r\n        init();\r\n    }\r\n\r\n    // $(window).resize(function () {\r\n    //     var screenWidth = window.innerWidth;\r\n    // });\r\n\r\n\r\n    if (tile_list.length !== 0 && location.pathname === '/') {\r\n        tile_check();\r\n    }\r\n})"],"file":"tileFilter.js"}